$(document).ready(function(){(function(e,n,r){function l(e,t){s=i.size();e=e+"<div class='bootstro-nav-wrapper'>";if(t==0)e=e+f.nextButton;else if(t==s-1)e=e+f.prevButton;else e=e+f.nextButton+f.prevButton;e=e+"</div>";e=e+'<div class="bootstro-finish-btn-wrapper">'+f.finishButton+"</div>";return e}var i;var s;var o=[];var u=null;var a={nextButton:'<button class="btn btn-primary btn-mini bootstro-next-btn">Next »</button>',prevButton:'<button class="btn btn-primary btn-mini bootstro-prev-btn">« Prev</button>',finishButton:'<button class="btn btn-mini btn-success bootstro-finish-btn"><i class="icon-ok"></i> Ok I got it, get back to the site</button>',stopOnBackdropClick:true};var f;get_element=function(e){if(i.filter("[data-bootstro-step="+e+"]").size()>0)return i.filter("[data-bootstro-step="+e+"]");else{return i.eq(e)}};get_popup=function(e){var n={};$el=get_element(e);t="<span class='label label-success'>"+(e+1)+"/"+s+"</span>";n.title=$el.attr("data-bootstro-title")||"";if(n.title!="")n.title=t+" - "+n.title;else n.title=t;n.content=$el.attr("data-bootstro-content")||"";n.content=l(n.content,e);n.placement=$el.attr("data-bootstro-placement")||"top";var r="";if($el.attr("data-bootstro-width")){n.width=$el.attr("data-bootstro-width");r=r+"width:"+$el.attr("data-bootstro-width")+";"}if($el.attr("data-bootstro-height")){n.height=$el.attr("data-bootstro-height");r=r+"height:"+$el.attr("data-bootstro-height")+";"}n.trigger="manual";n.html=$el.attr("data-bootstro-html")||"top";n.template='<div class="popover" style="'+r+'"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div>'+"</div>";return n};e.destroy_popover=function(e){e=e||0;if(e!="all"){$el=get_element(e);$el.popover("destroy").removeClass("bootstro-highlight")}};e.stop=function(){e.destroy_popover(u);e.unbind();n("div.bootstro-backdrop").remove()};e.go_to=function(t){e.destroy_popover(u);if(s!=0){p=get_popup(t);$el=get_element(t);$el.popover(p).popover("show");min=Math.min(n(".popover.in").offset().top,$el.offset().top);n("html,body").animate({scrollTop:min-20},"slow");$el.addClass("bootstro-highlight");u=t}};e.next=function(){if(u+1==s){alert("End of introduction")}else e.go_to(u+1)};e.prev=function(){if(u==0){alert("At start of intros")}else e.go_to(u-1)};e.start=function(t,r){f=n.extend(true,{},a);n.extend(f,r||{});t=t||".bootstro";i=n(t);s=i.size();n('<div class="bootstro-backdrop"></div>').appendTo("body");e.bind();e.go_to(0)};e.bind=function(){e.unbind();n("html").on("click.bootstro",".bootstro-next-btn",function(t){e.next();t.preventDefault();return false});n("html").on("click.bootstro",".bootstro-prev-btn",function(t){e.prev();t.preventDefault();return false});n("html").on("click.bootstro",".bootstro-finish-btn",function(t){e.stop()});if(f.stopOnBackdropClick){n("html").on("click.bootstro","div.bootstro-backdrop",function(t){if(n(t.target).hasClass("bootstro-backdrop"))e.stop()})}n(document).on("keydown.bootstro",function(t){var n=t.keyCode?t.keyCode:t.which;if(n==39||n==40)e.next();else if(n==37||n==38)e.prev();else if(n==27)e.stop()})};e.unbind=function(){n("html").unbind("click.bootstro");n(document).unbind("keydown.bootstro")}})(window.bootstro=window.bootstro||{},jQuery)})
